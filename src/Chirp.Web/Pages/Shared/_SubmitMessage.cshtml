@model Chirp.Razor.Pages.PublicModel
@using Chirp.Razor.Pages
@using Microsoft.AspNetCore.Identity
@inject SignInManager<Author> SignInManager
@inject UserManager<Author> UserManager

@{
    var routeName = ViewContext.HttpContext.GetRouteValue("author");
    
}
@if (SignInManager.IsSignedIn(User))
{
    Author? author = await UserManager.GetUserAsync(User);
    if (author != null && author.Name != null)
    {
        string authorName = author!.Name;
        <div class="cheepbox">
            <h3>What's on your mind @authorName?</h3>
            <form method="post">
                <input style="float: left" type="text" asp-for="Message" asp-for="routeName">
                <input type="submit" value="Share">
            </form>
        </div>
    }
    else
    {
        await SignInManager.SignOutAsync();
    }
}