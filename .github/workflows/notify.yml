name: PR notification

on:
  pull_request:
    types: ['opened', 'edited', 'reopened', 'synchronize', 'ready_for_review']
    branches: [ "main" ]

jobs:
  notify:
    if: github.event.pull_request.draft == false
    runs-on: ubuntu-latest
    steps:
    - name: Discord notification
      env:
        DISCORD_WEBHOOK: ${{ secrets.DISCORD_WEBHOOK }}
      uses: Ilshidur/action-discord@0.4.0
      with:
        args: |-
          ### PR \#${{ github.event.pull_request.number }} is ready for review @everyone
          ğŸ“ ${{ github.event.pull_request.title }}
          ğŸ”— ${{ github.event.pull_request.html_url }}
          -# ${{ github.event.pull_request.commits }} commits â€¢ ${{ github.event.pull_request.changed_files }} files changed â€¢ [+${{ github.event.pull_request.additions }} \| \-${{ github.event.pull_request.deletions }}]